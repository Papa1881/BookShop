/*! For license information please see bundle.a898d1da351aae840120.js.LICENSE.txt */
(()=>{"use strict";var t={};function n(){var t,r,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(n,o,c,a){var i=o&&o.prototype instanceof s?o:s,l=Object.create(i.prototype);return e(l,"_invoke",function(n,e,o){var c,a,i,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return c=n,a=0,i=t,d.n=e,u}};function v(n,e){for(a=n,i=e,r=0;!f&&s&&!o&&r<l.length;r++){var o,c=l[r],v=d.p,p=c[2];n>3?(o=p===e)&&(a=c[4]||3,i=c[5]===t?c[3]:c[5],c[4]=3,c[5]=t):c[0]<=v&&((o=n<2&&v<c[1])?(a=0,d.v=e,d.n=c[1]):v<p&&(o=n<3||c[0]>e||e>p)&&(c[4]=n,c[5]=e,d.n=p,a=0))}if(o||n>1)return u;throw f=!0,e}return function(o,l,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,p),a=l,i=p;(r=a<2?t:i)||!f;){c||(a?a<3?(a>1&&(d.n=-1),v(a,i)):d.n=i:d.v=i);try{if(s=2,c){if(a||(o="next"),r=c[o]){if(!(r=r.call(c,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=c.return)&&r.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=t}else if((r=(f=d.n<0)?i:n.call(e,d))!==u)break}catch(n){c=t,a=1,i=n}finally{s=1}}return{value:r,done:f}}}(n,c,a),!0),l}var u={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var d=[][c]?r(r([][c]())):(e(r={},c,(function(){return this})),r),v=f.prototype=s.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return l.prototype=f,e(v,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,a,"GeneratorFunction"),e(v),e(v,a,"Generator"),e(v,c,(function(){return this})),e(v,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:p}})()}function e(t,n,r,o){var c=Object.defineProperty;try{c({},"",{})}catch(t){c=0}e=function(t,n,r,o){if(n)c?c(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r;else{var a=function(n,r){e(t,n,(function(t){return this._invoke(n,r,t)}))};a("next",0),a("throw",1),a("return",2)}},e(t,n,r,o)}function r(t,n,e,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void e(t)}i.done?n(u):Promise.resolve(u).then(r,o)}function o(t){return c.apply(this,arguments)}function c(){var t;return t=n().m((function t(e){var r,o,c,a,i,u,s=arguments;return n().w((function(t){for(;;)switch(t.n){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:0,o=s.length>2&&void 0!==s[2]?s[2]:6,c="".concat("https://www.googleapis.com/books/v1/volumes","?q=subject:").concat(e,"&key=").concat("AIzaSyApZww8PjxV-LxkyvNtwIdFVufQjRJTtI4","&printType=books&startIndex=").concat(r,"&maxResults=").concat(o,"&langRestrict=en"),t.p=1,t.n=2,fetch(c);case 2:return a=t.v,t.n=3,a.json();case 3:return i=t.v,t.a(2,i.items||[]);case 4:return t.p=4,u=t.v,console.error("Ошибка загрузки книг:",u),t.a(2,[])}}),t,null,[[1,4]])})),c=function(){var n=this,e=arguments;return new Promise((function(o,c){var a=t.apply(n,e);function i(t){r(a,o,c,i,u,"next",t)}function u(t){r(a,o,c,i,u,"throw",t)}i(void 0)}))},c.apply(this,arguments)}t.p="";var a="bookshop-cart";function i(){return JSON.parse(localStorage.getItem(a))||[]}function u(t){return i().includes(t)}function s(){var t=i().length,n=document.querySelector(".cart__badge");n&&(t>0?(n.textContent=t,n.style.display="inline-block"):(n.textContent="",n.style.display="none"))}function l(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=document.querySelector(".books");n||(e.innerHTML=""),t.forEach((function(t){var n,r=t.id,o=t.volumeInfo,c=o.title,a=o.authors,i=o.description,s=o.imageLinks,l=o.averageRating,f=o.ratingsCount,d=(null==s?void 0:s.thumbnail)||"./assets/placeholder.jpg",v=a?a.join(", "):"Unknown Author",p=i?(n=i).length>200?n.slice(0,200)+"…":n:"No description",y=l?'<div class="book__rating">★ '.concat(l," (").concat(f||0,")</div>"):"",h=u(r),g=h?"Remove from cart":"Buy now",m=h?"active":"",b='\n      <div class="book">\n        <img src="'.concat(d,'" alt="').concat(c,'" class="book__image"/>\n        <h3 class="book__title">').concat(c,'</h3>\n        <p class="book__author">').concat(v,"</p>\n        ").concat(y,'\n        <p class="book__description">').concat(p,'</p>\n        <button class="book__buy ').concat(m,'" data-id="').concat(r,'">').concat(g,"</button>\n      </div>\n    ");e.insertAdjacentHTML("beforeend",b)})),document.querySelectorAll(".book__buy").forEach((function(t){t.addEventListener("click",(function(){var n=t.dataset.id;(function(t){var n=i(),e=n.indexOf(t);-1===e?n.push(t):n.splice(e,1),function(t){localStorage.setItem(a,JSON.stringify(t))}(n),n.length})(n),s();var e=u(n);t.textContent=e?"Remove from cart":"Buy now",t.classList.toggle("active",e)}))}));var r=document.querySelector(".load-more");t.length<6?r.style.display="none":r.style.display="inline-block",s()}var f,d=[t.p+"assets/74a52287e0f70ee9e988.png",t.p+"assets/69931809aae17d406e9a.png",t.p+"assets/60d574fde7071ded6164.png"],v=0;const p=t.p+"assets/53eb7453fd12000f24b2.svg",y=t.p+"assets/06300a9cfb4d0b42de2d.svg",h=t.p+"assets/652df15d9cf1c5459c2c.svg";function g(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function c(e,r,o,c){var u=r&&r.prototype instanceof i?r:i,s=Object.create(u.prototype);return m(s,"_invoke",function(e,r,o){var c,i,u,s=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return c=n,i=0,u=t,d.n=e,a}};function v(e,r){for(i=e,u=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,c=l[n],v=d.p,p=c[2];e>3?(o=p===r)&&(i=c[4]||3,u=c[5]===t?c[3]:c[5],c[4]=3,c[5]=t):c[0]<=v&&((o=e<2&&v<c[1])?(i=0,d.v=r,d.n=c[1]):v<p&&(o=e<3||c[0]>r||r>p)&&(c[4]=e,c[5]=r,d.n=p,i=0))}if(o||e>1)return a;throw f=!0,r}return function(o,l,p){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,p),i=l,u=p;(n=i<2?t:u)||!f;){c||(i?i<3?(i>1&&(d.n=-1),v(i,u)):d.n=u:d.v=u);try{if(s=2,c){if(i||(o="next"),n=c[o]){if(!(n=n.call(c,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,i<2&&(i=0)}else 1===i&&(n=c.return)&&n.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=t}else if((n=(f=d.n<0)?u:e.call(r,d))!==a)break}catch(n){c=t,i=1,u=n}finally{s=1}}return{value:n,done:f}}}(e,o,c),!0),s}var a={};function i(){}function u(){}function s(){}n=Object.getPrototypeOf;var l=[][r]?n(n([][r]())):(m(n={},r,(function(){return this})),n),f=s.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,m(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,m(f,"constructor",s),m(s,"constructor",u),u.displayName="GeneratorFunction",m(s,o,"GeneratorFunction"),m(f),m(f,o,"Generator"),m(f,r,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:c,m:d}})()}function m(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}m=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var c=function(n,e){m(t,n,(function(t){return this._invoke(n,e,t)}))};c("next",0),c("throw",1),c("return",2)}},m(t,n,e,r)}function b(t,n,e,r,o,c,a){try{var i=t[c](a),u=i.value}catch(t){return void e(t)}i.done?n(u):Promise.resolve(u).then(r,o)}var _,w,S="Fiction",k=0;function j(){return L.apply(this,arguments)}function L(){var t;return t=g().m((function t(){var n,e,r=arguments;return g().w((function(t){for(;;)switch(t.n){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:S,e=r.length>1&&void 0!==r[1]&&r[1],t.n=1,o(n,k,6);case 1:l(t.v,e);case 2:return t.a(2)}}),t)})),L=function(){var n=this,e=arguments;return new Promise((function(r,o){var c=t.apply(n,e);function a(t){b(c,r,o,a,i,"next",t)}function i(t){b(c,r,o,a,i,"throw",t)}a(void 0)}))},L.apply(this,arguments)}_=function(t){S=t,k=0,j(t,!1)},(w=document.querySelectorAll(".category")).forEach((function(t){t.addEventListener("click",(function(){w.forEach((function(t){return t.classList.remove("active")})),t.classList.add("active");var n=t.dataset.category;_(n)}))})),document.querySelector(".load-more").addEventListener("click",(function(){k+=6,j(S,!0)})),s(),j(S),function(){var t=document.querySelector(".slider__wrapper"),n=document.createElement("div");n.classList.add("slides"),d.forEach((function(t,e){var r=document.createElement("div");r.classList.add("slide"),r.innerHTML='<img src="'.concat(t,'" alt="Slide ').concat(e+1,'" />'),n.appendChild(r)})),t.prepend(n);var e=document.querySelector(".slider__dots");e.classList.add("dots"),d.forEach((function(t,n){var r=document.createElement("span");r.classList.add("dot"),0===n&&r.classList.add("active"),r.dataset.index=n,e.appendChild(r)})),t.appendChild(e);var r=e.querySelectorAll(".dot");function o(t){n.style.transform="translateX(-".concat(100*t,"%)"),r.forEach((function(t){return t.classList.remove("active")})),r[t].classList.add("active"),v=t}function c(){o((v+1)%d.length)}r.forEach((function(t){t.addEventListener("click",(function(){o(+t.dataset.index),clearInterval(f),f=setInterval(c,5e3)}))})),o(v),f=setInterval(c,5e3)}(),document.querySelector(".icon--user").innerHTML='<img src="'.concat(p,'" alt="Login">'),document.querySelector(".icon--search").innerHTML='<img src="'.concat(y,'" alt="Search">'),document.querySelector(".icon--cart").innerHTML='<img src="'.concat(h,'" alt="Cart">')})();